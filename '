# main game file for Python on Rails

import pyglet
import settings
import menu

class Game(object):
    def __init__(self):
        #super(Game, self).__init__()
        #pyglet.resource.path = settings.RESOURCE_PATH
        #pyglet.resource.reindex()
        self.window = pyglet.window.Window(width = 1024, height = 768)
        print str(self.window)
        self.window.on_draw = self.on_draw
        #print str(self.window.on_draw)
        #print str(self.window.on_key_press)
        #self.current_scene = menu.MainMenu(self)
    
    def start_scene(self):
        print str(self.window)
        print str(self.window.on_draw)
        self.window.on_key_press = self.on_key_press
        print str(self.window.on_key_press)
        #self.window.set_handler("on_key_press", self.current_scene.on_key_press)
        #self.window.set_handler("on_draw", self.current_scene.on_draw)
        #self.current_scene.start()

    #def stop_scene(self):
    #    self.current_scene.stop()
    #    pyglet.clock.unschedule(self.current_scene.update)
    #    self.window.remove_handlers()
    #    self.window.clear()

    #def hello(self):
    #    print "Callback hellow!"

    def on_draw(self):
        self.window.clear()
        print "Dummy handler"
    
    def on_key_press(self, symbol, modifiers):
        print "in key press"

if __name__ == "__main__":
    game = Game()
    pyglet.app.run()
    game.start_scene()
    #game.start_scene()
